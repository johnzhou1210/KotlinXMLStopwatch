<div class="step-text">
<h5 id="description">Description</h5><p>A notification is a good way to remind your users that the application is there! With this feature, we will make our app more convenient and user-friendly. To show notifications on newer Android versions (API 33+), we also need to handle permissions correctly when starting the stopwatch.</p><p>Once the stopwatch is running, the user will receive a notification when the stopwatch reaches the upper limit (provided the limit is set) but will still be able to keep working and track the overall elapsed time.</p><h5 id="objectives">Objectives</h5><ul><li><p><strong>Handle Notification Permissions (Android 13+):</strong></p><ul><li><p>When the <code class="java">Start</code> button is pressed, check if the <code class="java">POST_NOTIFICATIONS</code> permission is required (i.e., running on API 33 or higher) and if it has been granted.</p></li><li><p>If permission is already granted, start the stopwatch.</p></li><li><p>If permission is <em>not</em> granted, request the permission from the user.</p><ul><li><p>If the user grants the permission after the request, <strong>preferably</strong> start the stopwatch without requiring another button press.</p><div class="alert alert-primary"><p>While preferred, starting the stopwatch after grant isn't tested.</p></div></li><li><p>If the user denies the permission, do <em>not</em> start the timer.</p></li></ul></li><li><p>If running on a version below API 33, start the stopwatch when <code class="java">Start</code> button is pressed (no permission check needed for notifications).</p></li></ul></li><li><p><strong>Create Notification Channel:</strong></p><ul><li><p>Create a <code class="java">NotificationChannel</code> with the channel ID <code class="java">org.hyperskill</code>.</p></li><li><p>Set the <code class="java">NotificationChannel</code> importance to <code class="java">IMPORTANCE_HIGH</code>.</p></li></ul></li><li><p><strong>Trigger Notification:</strong></p><ul><li><p>Add an Android notification after the stopwatch reaches the upper limit and the upper limit is greater than 0.</p></li></ul></li><li><p><strong>Configure Notification:</strong></p><ul><li><p>Use <code class="java">393939</code> for the notification ID.</p></li><li><p>Add a small icon to your notification.</p></li><li><p>Add a suitable title to your notification.</p></li><li><p>Add relevant text to your notification.</p></li><li><p>Set the notification flags to include the flag only alert once.</p></li><li><p>Set the notification flags to include the flag insistent. You won't be able to do this directly through the builder. This must be done without unsetting other flags, typically using a bitwise <code class="java">or</code> operation on the notification's <code class="java">flags</code> field (<code class="java">flags = flags or Notification.FLAG_INSISTENT</code>). Remember, the notification flags field is a binary number in which each digit represents one flag that is on if 1 or off if 0.</p></li></ul></li></ul><h5 id="example">Example</h5><p>The notification should look as shown in the picture below.</p><p style="text-align: center"><picture><source media="(max-width: 480px)" srcset="https://ucarecdn.com/a608b34a-2141-41b5-b4ec-4080c3f2cd29/-/stretch/off/-/resize/480x/-/format/webp/ 1x,https://ucarecdn.com/a608b34a-2141-41b5-b4ec-4080c3f2cd29/-/stretch/off/-/resize/960x/-/format/webp/ 2x,https://ucarecdn.com/a608b34a-2141-41b5-b4ec-4080c3f2cd29/-/stretch/off/-/resize/1440x/-/format/webp/ 3x" type="image/webp"/><source media="(max-width: 800px)" srcset="https://ucarecdn.com/a608b34a-2141-41b5-b4ec-4080c3f2cd29/-/stretch/off/-/resize/800x/-/format/webp/ 1x,https://ucarecdn.com/a608b34a-2141-41b5-b4ec-4080c3f2cd29/-/stretch/off/-/resize/1600x/-/format/webp/ 2x,https://ucarecdn.com/a608b34a-2141-41b5-b4ec-4080c3f2cd29/-/stretch/off/-/resize/2400x/-/format/webp/ 3x" type="image/webp"/><source srcset="https://ucarecdn.com/a608b34a-2141-41b5-b4ec-4080c3f2cd29/-/stretch/off/-/resize/1100x/-/format/webp/ 1x,https://ucarecdn.com/a608b34a-2141-41b5-b4ec-4080c3f2cd29/-/stretch/off/-/resize/2200x/-/format/webp/ 2x,https://ucarecdn.com/a608b34a-2141-41b5-b4ec-4080c3f2cd29/-/stretch/off/-/resize/3000x/-/format/webp/ 3x" type="image/webp"/><img alt="Android NotificationChannel" height="400" src="https://ucarecdn.com/a608b34a-2141-41b5-b4ec-4080c3f2cd29/" width="189"/></picture></p>
</div>